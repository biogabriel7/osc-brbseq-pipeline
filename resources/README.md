# RNA-seq Pipeline Resources

This directory contains configuration files, reference data, and metadata required by the RNA-seq analysis pipeline.

## Directory Structure

```
resources/
├── config/         # Configuration files
├── genome/         # Reference genome files
├── metadata/       # Sample metadata
├── adaptors/       # Adaptor sequences
└── primers/        # Primer sequences
```

## Configuration Files

The `config/` directory contains the following files:

### params.yaml

This is the main configuration file for the pipeline. It defines parameters for each stage of the analysis:

```yaml
# Resource parameters
fastqc_threads: 2
fastqc_memory: 4000
trimming_threads: 4
trimming_memory: 32000
star_threads: 8
star_memory: 32000
featurecounts_threads: 4
featurecounts_memory: 8000

# Reference files
genome_fasta: "resources/genome/Homo_sapiens.GRCh38.dna.primary_assembly.fa"
gtf_file: "resources/genome/Homo_sapiens.GRCh38.90.gtf"
star_index: "resources/genome/star_index"

# Feature counts parameters
feature_type: "exon"
attribute: "gene_id"
strand_specificity: "0"
```

Key parameter sections:
- Resource parameters: CPU threads and memory allocation
- Reference file paths: Genome FASTA, GTF annotation, and indices
- Tool-specific parameters: Options for FastQC, fastp, STAR, and featureCounts

### metasheet.csv

This file defines the samples to be processed by the pipeline:

```csv
sample,R1,R2
sample1,/path/to/sample1_R1.fastq.gz,/path/to/sample1_R2.fastq.gz
sample2,/path/to/sample2_R1.fastq.gz,/path/to/sample2_R2.fastq.gz
```

Columns:
- `sample`: Sample identifier (used in output file names)
- `R1`: Path to forward reads FASTQ file
- `R2`: Path to reverse reads FASTQ file

### cluster.yaml

This file defines parameters for running the pipeline on a compute cluster:

```yaml
__default__:
  partition: general
  time: "04:00:00"
  nodes: 1
  ntasks: 1
  mem: "4G"

star_align:
  partition: bigmem
  time: "08:00:00"
  mem: "32G"
  ntasks: 8
```

Each rule can have specific resource requirements, with `__default__` providing fallback values.

## Reference Genome Files

The `genome/` directory should contain:

- **Reference genome FASTA**: `Homo_sapiens.GRCh38.dna.primary_assembly.fa`
- **Gene annotation GTF**: `Homo_sapiens.GRCh38.90.gtf`
- **STAR index**: `star_index/` (created by the pipeline if not present)

## Metadata Files

The `metadata/` directory contains:

- **trimmed_samples.csv**: Generated by the pipeline after trimming, contains paths to trimmed FASTQ files
- **Other metadata files**: Any additional sample information needed for downstream analysis

## Adaptor and Primer Sequences

The `adaptors/` and `primers/` directories contain:

- **Adaptor sequences**: Used for adapter trimming if not automatically detected
- **Primer sequences**: Used for primer removal if needed

## Automatically Generated Files

Some files in this directory are automatically generated by the pipeline:

- `metadata/trimmed_samples.csv`: Created after trimming
- `genome/star_index/`: Created if not present

## Customizing Resources

To customize the pipeline for your data:

1. Edit `config/params.yaml` to set appropriate parameters
2. Update `config/metasheet.csv` with your sample information
3. Ensure reference genome files are in the correct location
4. Adjust `config/cluster.yaml` if running on a compute cluster

## Reference Genome Preparation

If you need to prepare your own reference genome:

1. Download the reference genome FASTA and GTF annotation
2. Place them in the `genome/` directory
3. Update the paths in `config/params.yaml`
4. The STAR index will be created automatically by the pipeline 